paths:
  /saml/sso:
    get:
      description: |
        Returns the information that the client needs to use to authenticate
        using the configured identity provider
      operationId: samlSSO
      tags:
      - token
      - saml
      responses:
        '303':
          description: |
            The `Location` header contains the URL of the identity provider that should be
            used by the client to authenticate.
        '500':
          description: |
            Please ask your admin to configure the

  /saml/acs:
    post:
      consumes:
      - application/samlmetadata+xml
      produces:
      - application/json
      description: |
        Receives the SAML response created by the identity provider.

        The user's email address from the SAML response is used to find
        the matching wazo-auth user and generate an access token for that
        user.
      operationId: createTokenSAML
      tags:
      - token
      - saml
      parameters:
      - name: body
        in: body
        description: The SAML response
        required: true
        schema:
          $ref: '#/definitions/SAMLResponse'
      responses:
        '200':
          description: The created token's data
          schema:
            $ref: '#/definitions/Token'
        '400':
          description: Invalid expiration or missing field
          schema:
            $ref: '#/definitions/Error'
        '500':
          description: System related token generation error
          schema:
            $ref: '#/definitions/Error'

definitions:
  SAMLResponse:
    properties:
      response:
        description: The SAML response
        type: string
    required:
    - response
    type: object
